2025-05-26 12:10:20,101 - __main__ - INFO - setup_enhanced_logging:58 - 📝 详细日志保存到: output/logs/batch_processor_20250526_121020.log
2025-05-26 12:10:20,102 - __main__ - INFO - main:797 - 🚀 健壮的批处理器 - 增强版
2025-05-26 12:10:20,102 - __main__ - INFO - main:798 - ================================================================================
2025-05-26 12:10:20,102 - __main__ - INFO - interactive_csv_selection:93 - 🔍 搜索可用的CSV文件...
2025-05-26 12:10:20,102 - __main__ - INFO - interactive_csv_selection:102 - 📊 找到 11 个CSV文件:
2025-05-26 12:10:20,104 - __main__ - INFO - interactive_csv_selection:109 -    1. ./complete_final_output.csv
2025-05-26 12:10:20,104 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 12:10:20,106 - __main__ - INFO - interactive_csv_selection:109 -    2. ./current_status.csv
2025-05-26 12:10:20,106 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 12:10:20,109 - __main__ - INFO - interactive_csv_selection:109 -    3. ./final_complete_output.csv
2025-05-26 12:10:20,109 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.60 MB
2025-05-26 12:10:20,110 - __main__ - INFO - interactive_csv_selection:109 -    4. ./final_output.csv
2025-05-26 12:10:20,110 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.15 MB
2025-05-26 12:10:20,112 - __main__ - INFO - interactive_csv_selection:109 -    5. ./final_output_content_FigStep.csv
2025-05-26 12:10:20,112 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.49 MB
2025-05-26 12:10:20,113 - __main__ - INFO - interactive_csv_selection:109 -    6. ./new_output.csv
2025-05-26 12:10:20,113 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.09 MB
2025-05-26 12:10:20,114 - __main__ - INFO - interactive_csv_selection:109 -    7. ./output.csv
2025-05-26 12:10:20,114 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.08 MB
2025-05-26 12:10:20,115 - __main__ - INFO - interactive_csv_selection:109 -    8. ./quick_test_result.csv
2025-05-26 12:10:20,115 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.07 MB
2025-05-26 12:10:20,116 - __main__ - INFO - interactive_csv_selection:109 -    9. _csvs/content_FigStep.csv
2025-05-26 12:10:20,116 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.13 MB
2025-05-26 12:10:20,118 - __main__ - INFO - interactive_csv_selection:109 -   10. _csvs/content_Jailbreak28k.csv
2025-05-26 12:10:20,118 - __main__ - INFO - interactive_csv_selection:110 -       📊 896 行数据, 💾 0.51 MB
2025-05-26 12:10:20,119 - __main__ - INFO - interactive_csv_selection:109 -   11. _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 12:10:20,119 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.23 MB
2025-05-26 12:10:22,331 - __main__ - INFO - interactive_csv_selection:126 - ✅ 选择了文件: _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 12:10:22,331 - __main__ - INFO - main:818 - 📊 选择的CSV文件: _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 12:10:22,334 - __main__ - INFO - main:821 - 📈 文件统计: 1256 行数据, 0.23 MB
2025-05-26 12:10:22,334 - __main__ - INFO - main:826 - 📊 将处理全部 1256 行数据
2025-05-26 12:10:22,334 - __main__ - INFO - main:834 - 📋 处理计划:
2025-05-26 12:10:22,334 - __main__ - INFO - main:835 -    - 批次大小: 50
2025-05-26 12:10:22,335 - __main__ - INFO - main:836 -    - 预计批次数: 26
2025-05-26 12:10:22,335 - __main__ - INFO - main:837 -    - 使用模型: gpt-4o-mini
2025-05-26 12:10:22,335 - __main__ - INFO - main:838 -    - 估算成本: $3.90
2025-05-26 12:10:24,313 - __main__ - INFO - __init__:211 - 📁 输出目录: output/batch_results_content_MMSafeBench_cleaned_20250526_121024
2025-05-26 12:10:24,315 - __main__ - INFO - create_jobs:280 - 创建了 26 个批处理任务
2025-05-26 12:10:24,315 - __main__ - INFO - process_all_jobs:545 - ================================================================================
2025-05-26 12:10:24,315 - __main__ - INFO - process_all_jobs:546 - 开始处理 26 个批处理任务
2025-05-26 12:10:24,315 - __main__ - INFO - process_all_jobs:547 - ================================================================================
2025-05-26 12:10:24,315 - __main__ - INFO - process_all_jobs:560 - 
处理任务 1/26: batch_001
2025-05-26 12:10:24,317 - __main__ - INFO - process_single_job:409 - 📦 处理任务 batch_001 (第1次尝试)
2025-05-26 12:10:24,317 - __main__ - INFO - process_single_job:410 -    行范围: 1-50
2025-05-26 12:10:24,317 - __main__ - INFO - run_safe_command:284 - 🖥️  执行命令: python create_safe_batch_input.py _csvs/content_MMSafeBench_cleaned.csv output/batch_results_content_MMSafeBench_cleaned_20250526_121024/batch_001.jsonl --model gpt-4o-mini --start-row 0 --end-row 50
2025-05-26 12:10:24,317 - __main__ - INFO - run_safe_command:285 - ⏱️  超时设置: 120秒
2025-05-26 12:10:24,317 - __main__ - INFO - run_safe_command:289 - 🚀 开始执行命令...
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:300 - ⏱️  命令执行耗时: 0.3秒
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:301 - 🔍 返回码: 0
2025-05-26 12:10:24,592 - __main__ - DEBUG - run_safe_command:307 - 📤 标准输出: ...
2025-05-26 12:10:24,592 - __main__ - DEBUG - run_safe_command:308 - 📤 错误输出: 2025-05-26 12:10:24,519 - INFO - 成功读取CSV文件，共1256行
2025-05-26 12:10:24,519 - INFO - 处理范围: 第1行到第50行
2025-05-26 12:10:24,527 - INFO - 处理进度: 10/50
2025-05-26 12:10:24,534 - INFO - 处理进度: 20/50
2025-05-26 1...
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:389 - ✅ 命令执行完成，返回码为0
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:284 - 🖥️  执行命令: python batch_processor.py output/batch_results_content_MMSafeBench_cleaned_20250526_121024/batch_001.jsonl --output-dir output/batch_results_content_MMSafeBench_cleaned_20250526_121024 --check-interval 30
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:285 - ⏱️  超时设置: 600秒
2025-05-26 12:10:24,592 - __main__ - INFO - run_safe_command:289 - 🚀 开始执行命令...
2025-05-26 12:15:31,645 - __main__ - INFO - run_safe_command:300 - ⏱️  命令执行耗时: 307.1秒
2025-05-26 12:15:31,645 - __main__ - INFO - run_safe_command:301 - 🔍 返回码: 0
2025-05-26 12:15:31,645 - __main__ - DEBUG - run_safe_command:307 - 📤 标准输出: ...
2025-05-26 12:15:31,645 - __main__ - DEBUG - run_safe_command:308 - 📤 错误输出: 2025-05-26 12:10:24,802 - INFO - 开始批处理工作流程
2025-05-26 12:10:28,551 - INFO - HTTP Request: POST https://api.openai.com/v1/files "HTTP/1.1 200 OK"
2025-05-26 12:10:28,553 - INFO - 文件上传成功，文件ID: file-MM7G...
2025-05-26 12:15:31,645 - __main__ - INFO - run_safe_command:378 - ✅ 检测到成功标识
2025-05-26 12:15:31,645 - __main__ - INFO - process_single_job:448 - 📋 batch_processor.py 输出详情:
2025-05-26 12:15:31,645 - __main__ - INFO - process_single_job:449 -    输出长度: 0 字符
2025-05-26 12:15:31,646 - __main__ - WARNING - process_single_job:466 - ⚠️  batch_001 命令成功但未找到专用结果文件
2025-05-26 12:15:31,646 - __main__ - INFO - process_single_job:467 - 📁 当前结果文件数量: 1
2025-05-26 12:15:31,646 - __main__ - INFO - process_single_job:470 - 🔍 分析可能的原因:
2025-05-26 12:15:31,646 - __main__ - INFO - process_single_job:474 -    - 输出中未找到批处理ID，可能提交失败
2025-05-26 12:15:31,646 - __main__ - INFO - process_single_job:484 - 📄 检查最新结果文件: batch_results_batch_68349274b49c819090ade43b2350cc1c.jsonl
2025-05-26 12:15:31,646 - __main__ - INFO - process_single_job:494 - ✅ 在最新文件中找到当前批次数据: ['row_0', 'row_1']
2025-05-26 12:15:31,646 - cost_tracker - INFO - record_batch_cost:179 - 记录批次成本: batch_001 = $0.0075
2025-05-26 12:15:31,647 - __main__ - INFO - process_single_job:529 - ✅ batch_001 完成 (估算成本: $0.0075)
2025-05-26 12:15:31,647 - __main__ - INFO - process_all_jobs:567 - 等待 120 秒后处理下一个任务...
