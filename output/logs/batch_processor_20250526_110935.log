2025-05-26 11:09:35,477 - __main__ - INFO - setup_enhanced_logging:58 - 📝 详细日志保存到: output/logs/batch_processor_20250526_110935.log
2025-05-26 11:09:35,477 - __main__ - INFO - main:770 - 🚀 健壮的批处理器 - 增强版
2025-05-26 11:09:35,477 - __main__ - INFO - main:771 - ================================================================================
2025-05-26 11:09:35,477 - __main__ - INFO - interactive_csv_selection:93 - 🔍 搜索可用的CSV文件...
2025-05-26 11:09:35,478 - __main__ - INFO - interactive_csv_selection:102 - 📊 找到 11 个CSV文件:
2025-05-26 11:09:35,479 - __main__ - INFO - interactive_csv_selection:109 -    1. ./complete_final_output.csv
2025-05-26 11:09:35,479 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 11:09:35,480 - __main__ - INFO - interactive_csv_selection:109 -    2. ./current_status.csv
2025-05-26 11:09:35,480 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 11:09:35,483 - __main__ - INFO - interactive_csv_selection:109 -    3. ./final_complete_output.csv
2025-05-26 11:09:35,483 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.60 MB
2025-05-26 11:09:35,484 - __main__ - INFO - interactive_csv_selection:109 -    4. ./final_output.csv
2025-05-26 11:09:35,484 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.15 MB
2025-05-26 11:09:35,487 - __main__ - INFO - interactive_csv_selection:109 -    5. ./final_output_content_FigStep.csv
2025-05-26 11:09:35,487 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.49 MB
2025-05-26 11:09:35,488 - __main__ - INFO - interactive_csv_selection:109 -    6. ./new_output.csv
2025-05-26 11:09:35,488 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.09 MB
2025-05-26 11:09:35,489 - __main__ - INFO - interactive_csv_selection:109 -    7. ./output.csv
2025-05-26 11:09:35,489 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.08 MB
2025-05-26 11:09:35,490 - __main__ - INFO - interactive_csv_selection:109 -    8. ./quick_test_result.csv
2025-05-26 11:09:35,490 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.07 MB
2025-05-26 11:09:35,491 - __main__ - INFO - interactive_csv_selection:109 -    9. _csvs/content_FigStep.csv
2025-05-26 11:09:35,491 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.13 MB
2025-05-26 11:09:35,493 - __main__ - INFO - interactive_csv_selection:109 -   10. _csvs/content_Jailbreak28k.csv
2025-05-26 11:09:35,493 - __main__ - INFO - interactive_csv_selection:110 -       📊 896 行数据, 💾 0.51 MB
2025-05-26 11:09:35,495 - __main__ - INFO - interactive_csv_selection:109 -   11. _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 11:09:35,495 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.23 MB
2025-05-26 11:09:38,809 - __main__ - INFO - interactive_csv_selection:126 - ✅ 选择了文件: _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 11:09:38,810 - __main__ - INFO - main:791 - 📊 选择的CSV文件: _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 11:09:38,814 - __main__ - INFO - main:794 - 📈 文件统计: 1256 行数据, 0.23 MB
2025-05-26 11:09:38,814 - __main__ - INFO - main:799 - 📊 将处理全部 1256 行数据
2025-05-26 11:09:38,814 - __main__ - INFO - main:807 - 📋 处理计划:
2025-05-26 11:09:38,814 - __main__ - INFO - main:808 -    - 批次大小: 20
2025-05-26 11:09:38,814 - __main__ - INFO - main:809 -    - 预计批次数: 63
2025-05-26 11:09:38,814 - __main__ - INFO - main:810 -    - 使用模型: gpt-4o-mini
2025-05-26 11:09:38,814 - __main__ - INFO - main:811 -    - 估算成本: $3.78
2025-05-26 11:09:42,193 - __main__ - INFO - __init__:210 - 📁 输出目录: output/batch_results_content_MMSafeBench_cleaned_20250526_110942
2025-05-26 11:09:42,195 - __main__ - INFO - create_jobs:279 - 创建了 63 个批处理任务
2025-05-26 11:09:42,196 - __main__ - INFO - process_all_jobs:519 - ================================================================================
2025-05-26 11:09:42,196 - __main__ - INFO - process_all_jobs:520 - 开始处理 63 个批处理任务
2025-05-26 11:09:42,196 - __main__ - INFO - process_all_jobs:521 - ================================================================================
2025-05-26 11:09:42,196 - __main__ - INFO - process_all_jobs:534 - 
处理任务 1/63: batch_001
2025-05-26 11:09:42,197 - __main__ - INFO - process_single_job:408 - 📦 处理任务 batch_001 (第1次尝试)
2025-05-26 11:09:42,197 - __main__ - INFO - process_single_job:409 -    行范围: 1-20
2025-05-26 11:09:42,197 - __main__ - INFO - run_safe_command:283 - 🖥️  执行命令: python create_safe_batch_input.py _csvs/content_MMSafeBench_cleaned.csv output/batch_results_content_MMSafeBench_cleaned_20250526_110942/batch_001.jsonl --model gpt-4o-mini --start-row 0 --end-row 20
2025-05-26 11:09:42,197 - __main__ - INFO - run_safe_command:284 - ⏱️  超时设置: 120秒
2025-05-26 11:09:42,197 - __main__ - INFO - run_safe_command:288 - 🚀 开始执行命令...
2025-05-26 11:09:42,628 - __main__ - INFO - run_safe_command:299 - ⏱️  命令执行耗时: 0.4秒
2025-05-26 11:09:42,628 - __main__ - INFO - run_safe_command:300 - 🔍 返回码: 0
2025-05-26 11:09:42,628 - __main__ - DEBUG - run_safe_command:306 - 📤 标准输出: ...
2025-05-26 11:09:42,628 - __main__ - DEBUG - run_safe_command:307 - 📤 错误输出: 2025-05-26 11:09:42,577 - INFO - 成功读取CSV文件，共1256行
2025-05-26 11:09:42,578 - INFO - 处理范围: 第1行到第20行
2025-05-26 11:09:42,585 - INFO - 处理进度: 10/20
2025-05-26 11:09:42,592 - INFO - 处理进度: 20/20
2025-05-26 1...
2025-05-26 11:09:42,628 - __main__ - INFO - run_safe_command:388 - ✅ 命令执行完成，返回码为0
2025-05-26 11:09:42,628 - __main__ - INFO - run_safe_command:283 - 🖥️  执行命令: python batch_processor.py output/batch_results_content_MMSafeBench_cleaned_20250526_110942/batch_001.jsonl --output-dir output/batch_results_content_MMSafeBench_cleaned_20250526_110942 --check-interval 30
2025-05-26 11:09:42,629 - __main__ - INFO - run_safe_command:284 - ⏱️  超时设置: 600秒
2025-05-26 11:09:42,629 - __main__ - INFO - run_safe_command:288 - 🚀 开始执行命令...
2025-05-26 11:09:42,886 - __main__ - INFO - run_safe_command:299 - ⏱️  命令执行耗时: 0.3秒
2025-05-26 11:09:42,886 - __main__ - INFO - run_safe_command:300 - 🔍 返回码: 0
2025-05-26 11:09:42,886 - __main__ - DEBUG - run_safe_command:306 - 📤 标准输出: ...
2025-05-26 11:09:42,886 - __main__ - DEBUG - run_safe_command:307 - 📤 错误输出: 2025-05-26 11:09:42,853 - ERROR - 请提供OpenAI API密钥，通过--api-key参数或OPENAI_API_KEY环境变量
...
2025-05-26 11:09:42,886 - __main__ - ERROR - run_safe_command:326 - ❌ 检测到严重错误: 请提供OpenAI API密钥
2025-05-26 11:09:42,886 - __main__ - ERROR - process_single_job:514 - ❌ batch_001 失败: 2025-05-26 11:09:42,853 - ERROR - 请提供OpenAI API密钥，通过--api-key参数或OPENAI_API_KEY环境变量

2025-05-26 11:09:42,887 - __main__ - INFO - process_all_jobs:541 - 等待 60 秒后处理下一个任务...
