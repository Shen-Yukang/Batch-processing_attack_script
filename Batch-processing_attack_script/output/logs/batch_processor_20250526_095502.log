2025-05-26 09:55:02,972 - __main__ - INFO - setup_enhanced_logging:58 - 📝 详细日志保存到: output/logs/batch_processor_20250526_095502.log
2025-05-26 09:55:02,972 - __main__ - INFO - main:673 - 🚀 健壮的批处理器 - 增强版
2025-05-26 09:55:02,972 - __main__ - INFO - main:674 - ================================================================================
2025-05-26 09:55:02,972 - __main__ - INFO - interactive_csv_selection:93 - 🔍 搜索可用的CSV文件...
2025-05-26 09:55:02,972 - __main__ - INFO - interactive_csv_selection:102 - 📊 找到 11 个CSV文件:
2025-05-26 09:55:02,973 - __main__ - INFO - interactive_csv_selection:109 -    1. ./complete_final_output.csv
2025-05-26 09:55:02,973 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 09:55:02,974 - __main__ - INFO - interactive_csv_selection:109 -    2. ./current_status.csv
2025-05-26 09:55:02,974 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.17 MB
2025-05-26 09:55:02,976 - __main__ - INFO - interactive_csv_selection:109 -    3. ./final_complete_output.csv
2025-05-26 09:55:02,976 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.60 MB
2025-05-26 09:55:02,977 - __main__ - INFO - interactive_csv_selection:109 -    4. ./final_output.csv
2025-05-26 09:55:02,977 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.15 MB
2025-05-26 09:55:02,979 - __main__ - INFO - interactive_csv_selection:109 -    5. ./final_output_content_FigStep.csv
2025-05-26 09:55:02,979 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.49 MB
2025-05-26 09:55:02,979 - __main__ - INFO - interactive_csv_selection:109 -    6. ./new_output.csv
2025-05-26 09:55:02,979 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.09 MB
2025-05-26 09:55:02,980 - __main__ - INFO - interactive_csv_selection:109 -    7. ./output.csv
2025-05-26 09:55:02,980 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.08 MB
2025-05-26 09:55:02,980 - __main__ - INFO - interactive_csv_selection:109 -    8. ./quick_test_result.csv
2025-05-26 09:55:02,980 - __main__ - INFO - interactive_csv_selection:110 -       📊 170 行数据, 💾 0.07 MB
2025-05-26 09:55:02,981 - __main__ - INFO - interactive_csv_selection:109 -    9. _csvs/content_FigStep.csv
2025-05-26 09:55:02,981 - __main__ - INFO - interactive_csv_selection:110 -       📊 500 行数据, 💾 0.13 MB
2025-05-26 09:55:02,983 - __main__ - INFO - interactive_csv_selection:109 -   10. _csvs/content_Jailbreak28k.csv
2025-05-26 09:55:02,983 - __main__ - INFO - interactive_csv_selection:110 -       📊 896 行数据, 💾 0.51 MB
2025-05-26 09:55:02,983 - __main__ - INFO - interactive_csv_selection:109 -   11. _csvs/content_MMSafeBench_cleaned.csv
2025-05-26 09:55:02,983 - __main__ - INFO - interactive_csv_selection:110 -       📊 1256 行数据, 💾 0.23 MB
2025-05-26 09:55:04,336 - __main__ - INFO - interactive_csv_selection:126 - ✅ 选择了文件: _csvs/content_Jailbreak28k.csv
2025-05-26 09:55:04,337 - __main__ - INFO - main:694 - 📊 选择的CSV文件: _csvs/content_Jailbreak28k.csv
2025-05-26 09:55:04,342 - __main__ - INFO - main:697 - 📈 文件统计: 896 行数据, 0.51 MB
2025-05-26 09:55:04,342 - __main__ - INFO - main:702 - 📊 将处理全部 896 行数据
2025-05-26 09:55:04,342 - __main__ - INFO - main:710 - 📋 处理计划:
2025-05-26 09:55:04,342 - __main__ - INFO - main:711 -    - 批次大小: 20
2025-05-26 09:55:04,342 - __main__ - INFO - main:712 -    - 预计批次数: 45
2025-05-26 09:55:04,342 - __main__ - INFO - main:713 -    - 使用模型: gpt-4o
2025-05-26 09:55:04,342 - __main__ - INFO - main:714 -    - 估算成本: $2.70
2025-05-26 09:56:16,087 - __main__ - INFO - __init__:210 - 📁 输出目录: output/batch_results_content_Jailbreak28k_20250526_095616
2025-05-26 09:56:16,090 - __main__ - INFO - create_jobs:279 - 创建了 45 个批处理任务
2025-05-26 09:56:16,090 - __main__ - INFO - process_all_jobs:422 - ================================================================================
2025-05-26 09:56:16,090 - __main__ - INFO - process_all_jobs:423 - 开始处理 45 个批处理任务
2025-05-26 09:56:16,090 - __main__ - INFO - process_all_jobs:424 - ================================================================================
2025-05-26 09:56:16,090 - __main__ - INFO - process_all_jobs:437 - 
处理任务 1/45: batch_001
2025-05-26 09:56:16,092 - __main__ - INFO - process_single_job:357 - 📦 处理任务 batch_001 (第1次尝试)
2025-05-26 09:56:16,092 - __main__ - INFO - process_single_job:358 -    行范围: 1-20
2025-05-26 09:56:16,092 - __main__ - INFO - run_safe_command:283 - 🖥️  执行命令: python create_safe_batch_input.py _csvs/content_Jailbreak28k.csv output/batch_results_content_Jailbreak28k_20250526_095616/batch_001.jsonl --model gpt-4o --start-row 0 --end-row 20
2025-05-26 09:56:16,092 - __main__ - INFO - run_safe_command:284 - ⏱️  超时设置: 120秒
2025-05-26 09:56:16,092 - __main__ - INFO - run_safe_command:288 - 🚀 开始执行命令...
2025-05-26 09:56:16,317 - __main__ - INFO - run_safe_command:299 - ⏱️  命令执行耗时: 0.2秒
2025-05-26 09:56:16,317 - __main__ - INFO - run_safe_command:300 - 🔍 返回码: 0
2025-05-26 09:56:16,317 - __main__ - DEBUG - run_safe_command:306 - 📤 标准输出: ...
2025-05-26 09:56:16,317 - __main__ - DEBUG - run_safe_command:307 - 📤 错误输出: 2025-05-26 09:56:16,298 - INFO - 成功读取CSV文件，共896行
2025-05-26 09:56:16,299 - INFO - 处理范围: 第1行到第20行
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_0: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_...
2025-05-26 09:56:16,317 - __main__ - ERROR - run_safe_command:323 - ❌ 检测到错误模式: error
2025-05-26 09:56:16,318 - __main__ - ERROR - process_single_job:375 - ❌ batch_001 创建输入文件失败: 2025-05-26 09:56:16,298 - INFO - 成功读取CSV文件，共896行
2025-05-26 09:56:16,299 - INFO - 处理范围: 第1行到第20行
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_0: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_1: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_2: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_3: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_4: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_5: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_6: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_7: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_8: 文件不存在
2025-05-26 09:56:16,299 - INFO - 处理进度: 10/20
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_9: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_10: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_11: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_12: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_13: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_14: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_15: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_16: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_17: 文件不存在
2025-05-26 09:56:16,299 - WARNING - 跳过无效图片 row_18: 文件不存在
2025-05-26 09:56:16,299 - INFO - 处理进度: 20/20
2025-05-26 09:56:16,300 - WARNING - 跳过无效图片 row_19: 文件不存在
2025-05-26 09:56:16,300 - ERROR - 没有有效的请求可以写入

2025-05-26 09:56:16,318 - __main__ - INFO - process_all_jobs:444 - 等待 60 秒后处理下一个任务...
